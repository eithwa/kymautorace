<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" name="author" content="Minda">
    <title>tb3_race</title>
    <link rel="shortcut icon" href="img/turtle.png" />
    <link rel="stylesheet" href="font-awesome-4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <!-- jQuery UI-->
    <link rel="stylesheet" href="jquery-ui-1.11.4/jquery-ui.css">
    <!-- Javascript -->
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="jquery-ui-1.11.4/jquery-ui.js"></script>
    <script src="jquery-ui-1.11.4/jquery-ui.min.js"></script>

    
    <script src="js/eventemitter2.min.js"></script>
    <script src="js/ros/roslib.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css"/>


    <!-- =========================== Custom ============================ -->
    <!-- css lib -->
    <link rel="stylesheet" href="css/form.css">

    <!-- js lib -->
    
</head>

<body class="Overflow" onload="Init();">
    <div class="modal-dialog Interface-Background Interface-Size Overflow">
        <div class="modal-content">
            <div class="modal-header">
                <table class="Table-W100">
                    <tr>
                        <td>
                            <h2 class="modal-title" id="Interface-Title">Turtlebot_Race</h2>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="modal-body Interface-BodySize">
                <div id="CameraSwitch">
                    <table class="Table-W100 Table-H90 Table-Center" >
                        <tr>
                            <td>
                                <div id="WifiButton">
                                    <i class="fa fa-3x fa-wifi" id="WifiButton-style" aria-hidden="true" data-toggle="modal"
                                        data-target="#connect_Robot"></i>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div>
                                    <input type="button" class="Button-style" id="Camera-Src" name="CameraElement"
                                        value="src" onclick="Open_Camera(1);" />
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div>
                                    <input type="button" class="Button-style" id="Camera-Mask" name="CameraElement"
                                        value="lane" onclick="Open_Camera(2)" />
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div>
                                    <input type="button" class="Button-style" id="Camera-Monitor" name="CameraElement"
                                        value="sign" onclick="Open_Camera(3)" />
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div>
                                    <input type="checkbox" id="Camera-View" name="CameraElement" onclick="Open_Camera(1)" />
                                    <label for="Camera-View">View</label>
                                </div>
                            </td>
                        </tr>
                        
                    </table>
                </div>
                <div class="form-group" align="center" id="View-Window">
                    <img id="player" src="img/offline.png">
                </div>
                <td>
                    <div id="info"> </div>
                </td>
                <div class="form-group" align="center" id="Param-Window">
                    <table class="Table-W100 Table-Center">
                        <tr>
                            <td>
                                <div class="form-group" align="center" id="Set-Param">
                                    <!-- Set Param Ul -->
                                    <ul id="Set-Param-ul" class="nav nav-tabs">
                                        <li class="active dropdown">
                                            <a href="#" id="RobotTabDrop" class="dropdown-toggle" data-toggle="dropdown" >Robot
                                                <b class="caret"></b>
                                            </a>
                                            <ul class="dropdown-menu" role="menu" aria-labelledby="RobotTabDrop" >
                                                <li><a class="active" href="#Robot-Param" tabindex="-1" data-toggle="tab">Param</a></li>
                                                <li><a href="#Robot-Strategy" tabindex="-1" data-toggle="tab">Strategy</a></li>
                                            </ul>
                                        </li>
                                        <li class="active dropdown">
                                            <a href="#" id="VisionTabDrop" class="dropdown-toggle" data-toggle="dropdown">Vision
                                                <b class="caret"></b>
                                            </a>
                                            <ul class="dropdown-menu" role="menu" aria-labelledby="RobotTabDrop">
                                                <li><a href="#Vision-HSV" tabindex="-1" data-toggle="tab">HSV</a></li>
                                                <li><a href="#Vision-Param" tabindex="-1" data-toggle="tab">Center</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                    <!-- Set Param Content  -->
                                    <div id="Set-Param-Content" class="tab-content">
                                        <div class="tab-pane fade" id="Robot-Param">
                                            <!--<p>fuck</p>-->
                                            <div id="parameter_div">
                                                <table  class="Table-W100 Table-Center Table-H10">
                                                    <tr colspan="2" align="center">
                                                        <label >Robot Parameter&nbsp;</label>
                                                    </tr>
                                                    <tr>
                                                        <td>vel_x</td>
                                                        <td>
                                                            <input type="text" name="ParameterElement" value="0.3" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>vel_z</td>
                                                        <td>
                                                            <input type="text" name="ParameterElement" value="0.2" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>error_ang</td>
                                                        <td>
                                                            <input type="text" name="ParameterElement" value="1.0" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>error_dis</td>
                                                        <td>
                                                            <input type="text" name="ParameterElement" value="0.025" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>find_ball_vel_z</td>
                                                        <td>
                                                            <input type="text" name="ParameterElement" value="0.6" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>goal_error_ang</td>
                                                        <td>
                                                            <input type="text" name="ParameterElement" value="0.5" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>slow_vel_x</td>
                                                        <td>
                                                            <input type="text" name="ParameterElement" value="0.2" />
                                                        </td>
                                                    </tr>

                                                    <td colspan="2" align="center">
                                                        <label >S-planning Parameter&nbsp;</label>
                                                    </td>
                                                    <tr>
                                                        <td>max_distance</td>
                                                        <td>
                                                            <input type="text" name="s_planningElement" value="1.5" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>min_distance</td>
                                                        <td>
                                                            <input type="text" name="s_planningElement" value="0.4" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>x_max_speed</td>
                                                        <td>
                                                            <input type="text" name="s_planningElement" value="0.6" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>x_min_speed</td>
                                                        <td>
                                                            <input type="text" name="s_planningElement" value="0.2" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>max_angle</td>
                                                        <td>
                                                            <input type="text" name="s_planningElement" value="30" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>min_angle</td>
                                                        <td>
                                                            <input type="text" name="s_planningElement" value="10" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>z_max_peed</td>
                                                        <td>
                                                            <input type="text" name="s_planningElement" value="0.6" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>z_min_peed</td>
                                                        <td>
                                                            <input type="text" name="s_planningElement" value="0.2" />
                                                        </td>
                                                    </tr>
                                                 </table>
                                             </div>
                                             <div >
                                             
                                                   <button id="HSV-Sent" onclick="Set_strategy_Param()">sent</button>
                                             
                                             </div>
                                        </div>
                                     
                                        <div class="tab-pane fade in active" id="Robot-Strategy">
                                        
                                            <table>
                                                <td>
                                                    <label>電池電量&nbsp;&nbsp;&nbsp;&nbsp;</label>
                                                </td>
                                                <td>
                                                    <label id="batteryid">0.00</label>
                                                    <label id="batteryid2">%</label>
                                                </td>
                                            </table>
                                            
                                            
                                        
                                            <table>
                                                <tr>
                                                    <td>
                                                        <label>&nbsp;&nbsp;&nbsp;odom&nbsp;&nbsp;</label>
                                                    </td>
                                                    <td>
                                                        <label>(</label>
                                                        <label id="local_x" name="StrategyElement">999</label>
                                                        <label>,</label>
                                                        <label id="local_y" name="StrategyElement">999</label>
                                                        <label>)</label>
                                                    </td>
                                                    <td>
                                                        <label>&nbsp;&nbsp;angle&nbsp;&nbsp;</label>
                                                    </td>
                                                    <td>
                                                        <label id="local_angle" name="StrategyElement">999</label>
                                                    </td>
                                                <tr>
                                            </table>
                          
                                            <table class="Table-W100 Table-Center Table-H90">
                                                <div id="StatusDiv">
                                                    <tr>
                                                        <td>
                                                            <div id="startdiv">
                                                                <input id="StartInput" type="radio" name="SwitchButton" onclick="strategy_start(1);" />
                                                                <label id="StartButton" for="StartInput">Start</label>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div id="stopdiv">
                                                                <input id="StopInput" type="radio" checked="checked" name="SwitchButton" onclick="strategy_start(0);shop_robot();" />
                                                                <label id="StopButton" for="StopInput">Stop</label>
                                                            </div>
                                                        </td>
                                                        <!--<td>
                                                            <input type="radio" id="start_btn" name="StrategyElement"
                                                                value="start" onclick="strategy_start(1);" />
                                                            <input type="radio" id="stop_btn" name="StrategyElement" checked="false"value="stop"
                                                                onclick="strategy_start(0);" />
                                                        </td>-->
                                                        <td>
                                                            <input type="button" id="reset_btn" name="StrategyElement"
                                                                value="reset" onclick="Pub_Reset();" />
                                                        <td>
                                                    </tr>
                                                </div>
                                            </table>
                                            <table>
                                                <tr>
                                                    <td>
                                                        <label>&nbsp;</label>
                                                    </td>
                                                <tr>
                                            </table>
                                            <table >
                                                <tr >
                                                  <div id="KeyboardDiv" >
                                                    <input autocomplete="off" id="KeyboardControlButton" type="checkbox" name="KeyboardControl" onclick="KeyboardState(this.checked)" />
                                                    <label id="KeyboardControlButton" for="KeyboardControlButton">Keyboard Control</label>
                                                  </div>
                                                  <div id="directiondiv">
                                                      <label id="direction">停止</label>
                                                  </div>
                                                <tr>
                                                <tr>
                                                    <td colspan="2" align="center">
                                                        <label id="SpeedLabel">Speed&nbsp;<i class="fa fa-bolt "></i></label>
                                                    </td>
                                                    <td>
                                                        <input id="SpeedSlider" name="SpeedElement" type="range" min="0" max="100" value="0" oninput="ToInputValue(this.value,this.name,1);">
                                                    </td>
                                                    <td align="center">
                                                        <input id="SpeedInput" name="SpeedElement" placeholder="Speed" value="0" type="number" min="0" max="100" oninput="ToSliderValue(this.value,this.name,0);" />
                                                    </td>
                                                </tr>                   
                                                <tr>
                                                    <td colspan="3" align="center" left="78%">
                                                    </td>
                                                </tr>
                                          </table>
       
                                        </div>
                                        <div class="tab-pane fade" id="Vision-HSV">
                                            <table class="Table-W100 Table-Center Table-H90">
                                                <tr>
                                                    <td class="Td-W10">
                                                        <label>Hmin</label>
                                                    </td>
                                                    <td class="Td-W70">
                                                        <input id="slider_Hue_Bar_min" class="HSV-silder" name="HSVElement"
                                                            type="range" min="0" max="180" oninput="showLabel(this.value, 'HSVLabelElement',0);Set_HSV()"></input>
                                                    </td>
                                                    <td class="Td-W20">
                                                        <label name="HSVLabelElement">255</label>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="Td-W10">
                                                        <label>Hmax</label>
                                                    </td>
                                                    <td class="Td-W70">
                                                        <input id="slider_Hue_Bar_max" class="HSV-silder" name="HSVElement"
                                                            type="range" min="0" max="180" oninput="showLabel(this.value, 'HSVLabelElement',1);Set_HSV()"></input>
                                                    </td>
                                                    <td class="Td-W20">
                                                        <label name="HSVLabelElement">255</label>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="Td-W10">
                                                        <label>Smin</label>
                                                    </td>
                                                    <td class="Td-W70">
                                                        <input id="slider_Sat_Bar_min" class="HSV-silder" name="HSVElement"
                                                            type="range" min="0" max="255" oninput="showLabel(this.value, 'HSVLabelElement',2);Set_HSV()"></input>
                                                    </td>
                                                    <td class="Td-W20">
                                                        <label name="HSVLabelElement">255</label>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="Td-W10">
                                                        <label>Smax</label>
                                                    </td>
                                                    <td class="Td-W70">
                                                        <input id="slider_Sat_Bar_max" class="HSV-silder" name="HSVElement"
                                                            type="range" min="0" max="255" oninput="showLabel(this.value, 'HSVLabelElement',3);Set_HSV()"></input>
                                                    </td>
                                                    <td class="Td-W20">
                                                        <label name="HSVLabelElement">255</label>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="Td-W10">
                                                        <label>Vmin</label>
                                                    </td>
                                                    <td class="Td-W70">
                                                        <input id="slider_Val_Bar_min" class="HSV-silder" name="HSVElement"
                                                            type="range" min="0" max="255" oninput="showLabel(this.value, 'HSVLabelElement',4);Set_HSV()"></input>
                                                    </td>
                                                    <td class="Td-W20">
                                                        <label name="HSVLabelElement">255</label>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="Td-W10">
                                                        <label>Vmax</label>
                                                    </td>
                                                    <td class="Td-W70">
                                                        <input id="slider_Val_Bar_max" class="HSV-silder" name="HSVElement"
                                                            type="range" min="0" max="255" oninput="showLabel(this.value, 'HSVLabelElement',5);Set_HSV()"></input>
                                                    </td>
                                                    <td class="Td-W20">
                                                        <label name="HSVLabelElement">255</label>
                                                    </td>
                                                </tr>
                                            </table>
                                            <table class="Table-W100 Table-Center Table-H10">
                                                <tr>
                                                    <td>
                                                        <select autocomplete="off" id="HSVSelect" onchange="Change_HSVmode()">
                                                            <option value="0">Red</option>
                                                            <option value="1">Blue</option>
                                                            <option value="2">Yellow</option>
                                                            <!--<option value="3">White</option>
                                                            <option value="4">Black</option>-->
                                                        </select>
                                                    </td>
                                                    <td>
                                                        <button id="HSV-Sent" onclick="Save_HSV()">sent</button>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                        <div class="tab-pane fade" id="Vision-Param">
                                            <table class="Table-W100 Table-H90 Table-Center">
                                                <tr>
                                                    <td class="Td-W10">
                                                        <label>Center X</label>
                                                    </td>
                                                    <td class="Td-W70">
                                                        <input id="slider_Center" name="VisionParamElement" type="range"
                                                            min="0" max="400" oninput="showLabel(this.value, 'VisionParamLabelElement',0);Set_center()"></input>
                                                    </td>
                                                    <td class="Td-W20">
                                                        <label name="VisionParamLabelElement">200</label>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="Td-W10">
                                                        <label>Center Y</label>
                                                    </td>
                                                    <td class="Td-W70">
                                                        <input id="slider_Y" name="VisionParamElement" type="range" min="100"
                                                            max="500" oninput="showLabel(this.value, 'VisionParamLabelElement',1);Set_center()"></input>
                                                    </td>
                                                    <td class="Td-W20">
                                                        <label name="VisionParamLabelElement">300</label>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="Td-W10">
                                                        <label>Catch Distance</label>
                                                    </td>
                                                    <td class="Td-W70">
                                                        <input id="slider_Height" name="VisionParamElement" type="range"
                                                            min="0" max="100" oninput="showLabel(this.value, 'VisionParamLabelElement',2);Set_center()"></input>
                                                    </td>
                                                    <td class="Td-W20">
                                                        <label name="VisionParamLabelElement">300</label>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="Td-W10">
                                                        <label>Size Filter</label>
                                                    </td>
                                                    <td class="Td-W70">
                                                        <input id="slider_Dis" name="VisionParamElement" type="range"
                                                            min="0" max="100" oninput="showLabel(this.value, 'VisionParamLabelElement',3);Set_center()"></input>
                                                    </td>
                                                    <td class="Td-W20">
                                                        <label name="VisionParamLabelElement">0</label>
                                                    </td>
                                                </tr>
                                            </table>
                                            <table class="Table-W100 Table-Center Table-H10">
                                                <tr>
                                                    <td>
                                                        <button onclick="Save_VisionParam() ">sent</button>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div class="form-group" align="center" id="Display">
                                   <!-- <table>
                                        <label>Shoot strategy</label>
                                    </table>
                                    <table width="100%" id="ShootStrategy">
                                        <tr>
                                            <td width="100%" align="center">
                                                <input autocomplete="on" checked="checked" id="shoot_disable" type="radio" name="shootElement" onclick="PublishTopicshootenable(this.checked)" />
                                                <label id="shoot_disable_lable" for="shoot_disable">Disable</label>
                                                <input autocomplete="on"  id="straight_shoot" type="radio" name="shootElement" onclick="PublishTopicshootenable(this.checked)" />
                                                <label id="straight_shoot_lable" for="straight_shoot">Straight</label>
                                                <input autocomplete="on"  id="far_shoot" type="radio" name="shootElement" onclick="PublishTopicshootenable(this.checked)" />
                                                <label id="far_shoot_lable" for="far_shoot">Far</label>
                                            </td>
                                        </tr>
                                    </table>-->
                                    
                                    <table>
                                        <label>Sign</label>
                                    </table>
                                    <table width="100%" id="autorace">
                                        <tr>
                                            <td width="50%" align="center">
                                                <input type="button" id="lane_btn" value="循線" onclick="autorace_trigger(2);" />
                                                <input type="button" id="triffic_light_btn" value="紅綠燈" onclick="autorace_trigger(3);" />
                                            </td>
                                            
                                        </tr>
                                        <tr>
                                            <td width="50%" align="center">
                                                <input type="button" id="way_btn" value="岔路" onclick="autorace_sign(2);" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td width="50%" align="center">
                                                <input type="button" id="left_btn" value="<-左" onclick="autorace_sign(7);" />
                                                <input type="button" id="right_btn" value="右->" onclick="autorace_sign(8);" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td width="50%" align="center">
                                                <input type="button" id="construction_btn" value="工地" onclick="autorace_sign(3);" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td width="50%" align="center">
                                                <input type="button" id="parking_btn" value="停車場" onclick="autorace_sign(4);" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td width="50%" align="center">
                                                <input type="button" id="stop_btn" value="STOP" onclick="autorace_sign(5);" />
                                            </td>
                                        </tr>
                                        <!--tr>
                                            <td width="50%" align="center">
                                                <input type="button" id="level_crossing_btn" value="平交道" onclick="autorace_sign(7);" />
                                            </td>
                                        </tr-->
                                        <tr>
                                            <td width="50%" align="center">
                                                <input type="button" id="tunnel_btn" value="隧道" onclick="autorace_sign(6);" />
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Wifi Setting-->
    <div class="modal fade Interface-Background" id="connect_Robot" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="WifiContent-style">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Connect To Robot</h4>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-group">
                            <label for="RobotIPDATA" class="control-label">Robot_IP:</label>
                            <input name="RobotIPDATA" type="text" class="form-control" id="RobotIP" value=IP.textContent>
                        </div>
                        <div class="form-group">
                            <label for="RobotHostDATA" class="control-label">Robot_Host:</label>
                            <input name="RobotHostDATA" type="text" class="form-control" id="RobotHost" value=Host.textContent>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" onclick="ros.close();">Close</button>
                    <button type="button" class="btn btn-primary" id="send-message" onclick="RobotConnect();history.go(0);">Connect</button>
                </div>
            </div>
        </div>
    </div>
</body>
    
    <script type="text/javascript">
        
      $("#KeyboardDiv").buttonset();
      $("#ColorDisableDiv").buttonset();
      $("#DoublePointDiv").buttonset();
      $("#ShootStrategy").buttonset();
      $("#camera_switch").buttonset();
      $("#StrategyDiv").buttonset();
      $("#startdiv").buttonset();
      $("#stopdiv").buttonset();
    </script>
<footer>
    <script src="js/slider/SliderControl.js"></script>
    <script src="js/variable.js"></script>
    <script src="js/KeyboardControl.js"></script>
    <!-- ros lib -->
    <script src="js/ros/RobotConnect.js"></script>
    <script src="js/ros/Rostopic.js"></script>





    <script src="js/ros/Rosservice.js"></script>
    <script src="js/ros/RosParameter.js"></script>
    <script src="js/ros/video.js"></script>
    <script src="js/SliderControl.js"></script>
    





    <script src="js/init.js"></script>
</footer>
</html>
